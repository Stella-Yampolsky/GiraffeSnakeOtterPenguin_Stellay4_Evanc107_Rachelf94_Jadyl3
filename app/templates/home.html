<!DOCTYPE html>
<!--
  Giraffesnakeotterpenguin: Stella Y., Evan C., Moyo F., Jady L.
  SoftDev
  P04: Bit Strife
  TBD
  Time Spent: 4/6 hours
-->

<html>
  <head>
      <meta charset="UTF-8">
      <title>Home</title>
      <script src="https://cdn.tailwindcss.com"></script>
      <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
      <script src="../static/jss/basicCH.js"></script>
      <link rel="stylesheet" href="../static/css/bg.css">
      <link rel="stylesheet" href="../static/css/theme.css">
  </head>
  <body>
    <!-- nav + bg -->
    {% block links %}
    {% endblock %}
    {% extends 'base.html' %}
    {% block content %}
    <!-- idiot egg -->
    <div class="flex justify-center">
      <img class="object-scale-down" src="../static/egg.gif"/>
    </div>
    <div class="flex justify-center">
      <!-- button to game -->
      <button type="submit" class="bg-yellow-400 hover:bg-yellow-600 text-white font-bold py-2 px-4 rounded">
        <a href="/game" class="self-center text-xl font-[Avenir] font-semibold whitespace-nowrap dark:text-white">
        Play Bit Strife!
      </button>
    </div>
    {% endblock %}
    <script>

      fetch('../hiv_probabilities_2013.csv')
    .then(response => response.text())
    .then(csv => {
      const { categories, data } = parseCSV(csv);
      renderChart(categories, data);
    });
    
      function parseCSV(text) {
        const rows = text.trim().split('\n').map(row => row.split(','));
        const categories = [];
        const data = [];
    
        // Assuming format: Label,Value
        for (let i = 1; i < rows.length; i++) {
          categories.push(rows[i][0]);
          data.push(parseFloat(rows[i][1]));
        }
    
        return { categories, data };
      }
    
      function renderChart(categories, data) {
        const options = {
          chart: {
            type: 'bar',
            height: 400
          },
          series: [{
            name: 'Values',
            data: data
          }],
          xaxis: {
            categories: categories
          }
        };
    
        const chart = new ApexCharts(document.querySelector("#chart"), options);
        chart.render();
      }
    </script>
  </body>

</html>
